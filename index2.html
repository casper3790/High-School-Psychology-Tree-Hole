<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>心靈充電站 - 你的高中職心靈港灣</title>
    <!-- 載入 Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 設定全域字體和背景 */
        body {
            font-family: 'Inter', 'Microsoft JhengHei', 'sans-serif';
            background-color: #f7f9fb; 
            transition: background-color 0.5s ease; 
        }
        html { scroll-behavior: smooth; }

        /* 主按鈕樣式：圓角、氣泡感陰影、微動畫 */
        .primary-btn {
            transition: all 0.3s ease;
            border-radius: 9999px; /* 全圓角 */
            box-shadow: 0 4px 15px -3px rgba(236, 72, 153, 0.4), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        .primary-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px -5px rgba(236, 72, 153, 0.6), 0 5px 8px -4px rgba(0, 0, 0, 0.1);
        }
        .primary-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            box-shadow: none;
        }
        
        /* Hero 區塊的漸變背景 */
        #home {
            background: linear-gradient(135deg, #e0f2fe 0%, #d1d5db 100%);
        }

        /* 呼吸法動畫圓圈 */
        #breathing-circle {
            width: 100px;
            height: 100px;
            background-color: #f472b6; /* Pink-500 */
            border-radius: 50%;
            margin: 0 auto 20px;
            transition: transform 5s ease-in-out, background-color 0.5s ease; /* 調整為 5s 過渡 */
            opacity: 0.8;
            box-shadow: 0 0 20px rgba(244, 114, 182, 0.7);
            will-change: transform;
        }

        /* Dark Mode 樣式覆蓋 */
        .dark-mode {
            background-color: #1a202c !important; 
            color: #e2e8f0 !important; 
        }
        .dark-mode header, .dark-mode footer, .dark-mode section, .dark-mode .bg-white, .dark-mode .bg-gray-50, .dark-mode #quote-display, .dark-mode #vent-response { 
            background-color: #2d3748 !important; 
            color: #e2e8f0 !important;
        }
        .dark-mode #home { background: linear-gradient(135deg, #1f2937 0%, #171923 100%) !important; }
        .dark-mode h1, .dark-mode h2, .dark-mode h3 { color: #ffffff !important; }
        .dark-mode p { color: #a0aec0 !important; }
        .dark-mode .text-gray-600, .dark-mode .text-gray-700 { color: #c0c7d1 !important; }
        .dark-mode #breathing-circle {
            background-color: #db2777; /* Rose-600 */
            box-shadow: 0 0 20px rgba(219, 39, 119, 0.7);
        }
        .dark-mode textarea {
             background-color: #4a5568 !important;
             border-color: #4a5568 !important;
        }
        
        /* Dark Mode for Deep Rose Help Section */
        .dark-mode section#help {
            background-color: #881337 !important; 
        }
        .dark-mode .bg-rose-700 {
            background-color: #9f1239 !important; 
        }
    </style>
    <!-- 使用 Inter 字體 -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
</head>
<body class="text-gray-800">

    <!-- 頂部導航列 (Navigation Bar) -->
    <header class="sticky top-0 z-50 bg-white shadow-lg transition duration-300 dark-mode:bg-gray-800">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center">
            <a href="#home" class="text-2xl font-extrabold text-pink-600 hover:text-indigo-800 transition duration-300">
                心靈充電站 🔋
            </a>
            <div class="flex items-center space-x-4">
                <!-- 桌面版導航連結 -->
                <div class="hidden md:flex space-x-6">
                    <a href="#stress" class="text-gray-600 hover:text-pink-500 transition duration-300 font-medium dark-mode:text-gray-300 dark-mode:hover:text-pink-400">壓力圖鑑</a>
                    <a href="#toolbox" class="text-gray-600 hover:text-pink-500 transition duration-300 font-medium dark-mode:text-gray-300 dark-mode:hover:text-pink-400">心情工具箱</a>
                    <a href="#alone" class="text-gray-600 hover:text-pink-500 transition duration-300 font-medium dark-mode:text-gray-300 dark-mode:hover:text-pink-400">同溫層打氣</a>
                    <a href="#help" class="text-red-600 hover:text-red-800 transition duration-300 font-bold dark-mode:text-red-400 dark-mode:hover:text-red-500">🚨 求助專線</a>
                </div>
                
                <!-- 深淺模式切換按鈕 -->
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-pink-500 dark-mode:hover:bg-gray-700">
                    <svg id="sun-icon" class="w-6 h-6 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                    <svg id="moon-icon" class="w-6 h-6 text-indigo-300 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                </button>

                <!-- 手機版選單按鈕 -->
                <button id="menu-btn" class="md:hidden p-2 rounded-full hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark-mode:hover:bg-gray-700">
                    <svg class="w-6 h-6 text-gray-600 dark-mode:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </nav>

        <!-- 手機版下拉選單 -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-100 dark-mode:bg-gray-800">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#stress" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-pink-50 hover:text-pink-600 dark-mode:text-gray-300 dark-mode:hover:bg-gray-700">壓力圖鑑</a>
                <a href="#toolbox" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-pink-50 hover:text-pink-600 dark-mode:text-gray-300 dark-mode:hover:bg-gray-700">心情工具箱</a>
                <a href="#alone" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-pink-50 hover:text-pink-600 dark-mode:text-gray-300 dark-mode:hover:bg-gray-700">同溫層打氣</a>
                <a href="#help" class="block px-3 py-2 rounded-md text-base font-medium text-red-600 hover:bg-red-50 hover:text-red-700 dark-mode:text-red-400 dark-mode:hover:bg-gray-700">🚨 求助專線</a>
            </div>
        </div>
    </header>

    <!-- 主要內容區塊 -->
    <main>

        <!-- 區塊 1: 首頁/英雄區 (Hero Section) -->
        <section id="home" class="pt-20 pb-28 sm:pt-24 sm:pb-36 transition duration-500">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h1 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold text-indigo-900 leading-tight mb-4 transition duration-500 dark-mode:text-white">
                    Chill Out. You Got This. ✨
                </h1>
                <p class="mt-4 text-xl sm:text-2xl text-indigo-700 max-w-3xl mx-auto transition duration-500 dark-mode:text-indigo-300">
                    上課、段考、報告、社團、還有那些八卦... **先登出一下！** 這裡專為正在打怪的高中職生設計，給你最 Real 的心靈空間。
                </p>
                <div class="mt-10 flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
                    <a href="#toolbox" class="primary-btn bg-pink-500 text-white font-bold py-3 px-8 text-lg hover:bg-pink-600 focus:ring-4 focus:ring-pink-300">
                        🕳️ 馬上找樹洞發洩
                    </a>
                    <a href="#stress" class="primary-btn bg-white text-indigo-600 font-bold py-3 px-8 text-lg border-2 border-indigo-600 shadow-lg hover:bg-indigo-50 focus:ring-4 focus:ring-indigo-300 dark-mode:bg-gray-700 dark-mode:text-indigo-300 dark-mode:border-indigo-400 dark-mode:hover:bg-gray-600">
                        🤔 看看大家在煩什麼
                    </a>
                </div>
            </div>
        </section>

        <!-- 區塊 2: 壓力圖鑑 (Relatable Stressors) -->
        <section id="stress" class="py-20 sm:py-28 bg-white transition duration-500 dark-mode:bg-gray-800">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl sm:text-4xl font-extrabold text-gray-900 text-center mb-12 transition duration-500 dark-mode:text-white">
                    🤯 壓力圖鑑：高中職生煩惱圖鑑
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- 壓力來源卡片 1：課業/考試 -->
                    <div class="bg-gray-50 p-6 rounded-2xl shadow-lg hover:shadow-2xl transition duration-300 border-t-8 border-indigo-500 dark-mode:bg-gray-700 dark-mode:border-indigo-400">
                        <h3 class="text-xl font-bold text-indigo-700 mb-2 dark-mode:text-indigo-300">📚 爆掉的進度</h3>
                        <p class="text-gray-600 text-sm dark-mode:text-gray-400">明明已經很努力了，成績還是很普通。還有那些永遠考不完的**證照和檢定**... 累死誰？</p>
                    </div>
                    <!-- 壓力來源卡片 2：人際關係 -->
                    <div class="bg-gray-50 p-6 rounded-2xl shadow-lg hover:shadow-2xl transition duration-300 border-t-8 border-pink-500 dark-mode:bg-gray-700 dark-mode:border-pink-400">
                        <h3 class="text-xl font-bold text-pink-700 mb-2 dark-mode:text-pink-300">🎭 小圈圈排擠</h3>
                        <p class="text-gray-600 text-sm dark-mode:text-gray-400">社團、報告**萬惡的分組**、誰跟誰又吵架了。學會放生不適合的關係，你不是他們的太陽。</p>
                    </div>
                    <!-- 壓力來源卡片 3：未來/志向 -->
                    <div class="bg-gray-50 p-6 rounded-2xl shadow-lg hover:shadow-2xl transition duration-300 border-t-8 border-yellow-500 dark-mode:bg-gray-700 dark-mode:border-yellow-400">
                        <h3 class="text-xl font-bold text-yellow-700 mb-2 dark-mode:text-yellow-300">🧭 不知未來</h3>
                        <p class="text-gray-600 text-sm dark-mode:text-gray-400">我到底該選升學還是就業？選了這個科系/組別真的對嗎？**沒人是神仙**，慢慢來，多試試看。</p>
                    </div>
                    <!-- 壓力來源卡片 4：家庭/自我懷疑 -->
                    <div class="bg-gray-50 p-6 rounded-2xl shadow-lg hover:shadow-2xl transition duration-300 border-t-8 border-green-500 dark-mode:bg-gray-700 dark-mode:border-green-400">
                        <h3 class="text-xl font-bold text-green-700 mb-2 dark-mode:text-green-300">👻 假裝沒事</h3>
                        <p class="text-gray-600 text-sm dark-mode:text-gray-400">怕讓家人失望，總是說「沒事」。但你不需要一直裝堅強，**允許自己崩潰一下**，再重新開機。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 區塊 3: 情緒工具箱 (Emotional Toolbox) - 包含樹洞功能 -->
        <section id="toolbox" class="py-20 sm:py-28 bg-indigo-50 transition duration-500 dark-mode:bg-gray-900">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl sm:text-4xl font-extrabold text-indigo-900 text-center mb-12 transition duration-500 dark-mode:text-white">
                    🧰 心情工具箱：發洩 + 重啟
                </h2>
                <div class="max-w-4xl mx-auto space-y-10">
                    
                    <!-- 新功能: 發洩樹洞 (Venting Tree Hole) -->
                    <div class="bg-white p-6 sm:p-8 rounded-3xl shadow-xl border border-pink-400 transition duration-500 dark-mode:bg-gray-700 dark-mode:border-pink-500">
                        <h3 class="text-2xl font-bold text-pink-600 mb-4 text-center dark-mode:text-pink-400">🕳️ 專屬發洩樹洞 (匿名 Real Talk)</h3>
                        <textarea id="vent-input" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-pink-500 focus:ring-pink-500 transition resize-none dark-mode:bg-gray-600 dark-mode:border-gray-600 dark-mode:text-white" rows="4" placeholder="輸入你現在超想罵、超想抱怨、或超想哭的事情... (這裡不會有人認識你)">不爽組員又雷我，報告都我在做！</textarea>
                        
                        <div class="flex justify-center mt-4">
                            <button id="vent-submit-btn" class="primary-btn bg-pink-500 text-white font-bold py-3 px-8 text-lg hover:bg-pink-600 focus:ring-4 focus:ring-pink-300">
                                丟進去！我不想聽大道理
                            </button>
                        </div>
                        
                        <div id="vent-response" class="mt-6 p-4 rounded-xl bg-indigo-100 text-indigo-800 italic font-semibold border-l-4 border-indigo-500 min-h-[4rem] flex items-center dark-mode:bg-indigo-900 dark-mode:text-indigo-200">
                            樹洞回覆會在這裡出現... 它會像你的死黨一樣給你一句話！
                        </div>
                    </div>

                    <!-- 隨機鼓勵小語生成器 -->
                    <div class="bg-white p-6 sm:p-8 rounded-3xl shadow-xl border border-indigo-200 transition duration-500 dark-mode:bg-gray-700 dark-mode:border-indigo-400">
                        <h3 class="text-2xl font-bold text-indigo-600 mb-4 text-center dark-mode:text-indigo-400">💬 隨機鼓勵小語機 🚀</h3>
                        <div class="text-center mb-6 h-24 flex items-center justify-center bg-indigo-50 rounded-xl p-4 italic text-gray-700 text-xl font-medium transition duration-500 dark-mode:bg-gray-600 dark-mode:text-indigo-200" id="quote-display">
                            點擊按鈕，獲得今日的專屬打氣！
                        </div>
                        <div class="flex justify-center">
                            <button id="generate-quote-btn" class="primary-btn bg-indigo-500 text-white font-bold py-3 px-8 text-lg hover:bg-indigo-600 focus:ring-4 focus:ring-indigo-300">
                                換一句新的！
                            </button>
                        </div>
                    </div>

                    <!-- 呼吸練習工具 -->
                    <div class="bg-white p-6 sm:p-8 rounded-3xl shadow-xl border border-pink-200 transition duration-500 dark-mode:bg-gray-700 dark-mode:border-pink-400">
                        <h3 class="text-2xl font-bold text-pink-600 mb-4 text-center dark-mode:text-pink-400">🌬️ 視覺呼吸法：5 秒吸氣，5 秒吐氣</h3>
                        <div class="text-center">
                            <div id="breathing-circle" class="scale-100"></div>
                            <div id="breath-status" class="text-3xl font-extrabold text-green-600 transition duration-500 dark-mode:text-green-400">
                                準備好了嗎？
                            </div>
                            <div id="breath-count" class="text-lg text-gray-500 mt-2 dark-mode:text-gray-400">
                                循環次數: 0
                            </div>
                        </div>
                        <div class="flex justify-center space-x-4 mt-6">
                            <button id="start-breath" class="primary-btn bg-green-500 text-white font-bold py-3 px-8 text-lg hover:bg-green-600 focus:ring-4 focus:ring-green-300">
                                開始 | Start
                            </button>
                            <button id="stop-breath" class="primary-btn bg-red-500 text-white font-bold py-3 px-8 text-lg hover:bg-red-600 focus:ring-4 focus:ring-red-300" disabled>
                                停止 | Stop
                            </button>
                        </div>
                    </div>

                </div>
            </div>
        </section>

        <!-- 區塊 4: 同溫層打氣 (Peer Support) -->
        <section id="alone" class="py-20 sm:py-28 bg-white transition duration-500 dark-mode:bg-gray-800">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl sm:text-4xl font-extrabold text-gray-900 text-center mb-12 transition duration-500 dark-mode:text-white">
                    🫂 同溫層打氣：我們都一樣爛 (但會變好)
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- 打氣卡片 1 -->
                    <div class="p-6 bg-yellow-50 rounded-3xl shadow-md border-b-4 border-yellow-400 transition duration-500 dark-mode:bg-gray-700 dark-mode:border-yellow-600">
                        <p class="text-4xl mb-3 dark-mode:text-white">#人生好難</p>
                        <p class="italic text-gray-700 mb-4 dark-mode:text-gray-300">
                            「我媽說我現在努力不夠，但她不知道我昨天熬夜趕專題。算了，**他們不懂啦**。我決定今晚去樓下買炸雞，先爽了再說。」
                        </p>
                        <p class="text-right font-semibold text-yellow-800 text-sm dark-mode:text-yellow-400">- 高二 D.Y. (普高) 🍕</p>
                    </div>
                    <!-- 打氣卡片 2 -->
                    <div class="p-6 bg-pink-50 rounded-3xl shadow-md border-b-4 border-pink-400 transition duration-500 dark-mode:bg-gray-700 dark-mode:border-pink-600">
                        <p class="text-4xl mb-3 dark-mode:text-white">#人際黑洞</p>
                        <p class="italic text-gray-700 mb-4 dark-mode:text-gray-300">
                            「誰說一定要有一群朋友？我現在只有 2 個真正能講屁話的，超讚。**質量比數量重要**，懂？」
                        </p>
                        <p class="text-right font-semibold text-pink-800 text-sm dark-mode:text-pink-400">- 高職三 J.C. (餐飲科) 👯‍♀️</p>
                    </div>
                    <!-- 打氣卡片 3 -->
                    <div class="p-6 bg-green-50 rounded-3xl shadow-md border-b-4 border-green-400 transition duration-500 dark-mode:bg-gray-700 dark-mode:border-green-600">
                        <p class="text-4xl mb-3 dark-mode:text-white">#未來誰鳥</p>
                        <p class="italic text-gray-700 mb-4 dark-mode:text-gray-300">
                            「我還不知道要幹嘛啊！我學會計，但我喜歡畫畫。反正大學可以轉系，工作可以換。**別把自己鎖死啦，多試錯就是贏家**。」
                        </p>
                        <p class="text-right font-semibold text-green-800 text-sm dark-mode:text-green-400">- 高二 L.W. (資訊科) 🎮</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 區塊 5: 快速求助資源 (Quick Help Resources) -->
        <section id="help" class="py-20 sm:py-28 bg-rose-800 transition duration-500">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h2 class="text-3xl sm:text-4xl font-extrabold text-white mb-6">
                    🚨 救命專線：別等，現在就打！
                </h2>
                <p class="text-xl text-rose-200 max-w-3xl mx-auto mb-12">
                    我們隨時都在。當你覺得撐不住時，請立刻使用這些資源。**保密，安全，專業**。
                </p>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                    <!-- 資源卡片 1 -->
                    <div class="p-6 bg-rose-700 rounded-3xl shadow-2xl transition duration-300 hover:scale-[1.05]">
                        <p class="text-5xl mb-2">📞</p>
                        <h3 class="text-2xl font-bold text-white mb-3">生命線 (1995)</h3>
                        <a href="tel:1995" class="text-4xl font-extrabold text-yellow-300 hover:text-yellow-100 transition duration-300 block">1995</a>
                    </div>
                    <!-- 資源卡片 2 -->
                    <div class="p-6 bg-rose-700 rounded-3xl shadow-2xl transition duration-300 hover:scale-[1.05]">
                        <p class="text-5xl mb-2">📞</p>
                        <h3 class="text-2xl font-bold text-white mb-3">張老師 (1980)</h3>
                        <a href="tel:1980" class="text-4xl font-extrabold text-yellow-300 hover:text-yellow-100 transition duration-300 block">1980</a>
                    </div>
                    <!-- 資源卡片 3 -->
                    <div class="p-6 bg-rose-700 rounded-3xl shadow-2xl transition duration-300 hover:scale-[1.05]">
                        <p class="text-5xl mb-2">🏫</p>
                        <h3 class="text-2xl font-bold text-white mb-3">學校輔導室</h3>
                        <p class="text-xl font-extrabold text-yellow-300 block">
                            找你的輔導老師！
                        </p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- 頁尾 (Footer) -->
    <footer class="bg-gray-800 text-white py-8 transition duration-500 dark-mode:bg-gray-900">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p class="text-sm">Made with 💖. 本站不是專業醫療，有緊急需求請撥打救命專線。</p>
            <p class="text-xs mt-2 text-gray-400">🔥 高中職生，你們超猛的。</p>
        </div>
    </footer>

    <!-- JavaScript 區域 -->
    <script>
        // ----------------------------------------------------
        // 全域變數和初始化
        // ----------------------------------------------------
        const quotes = [
            "把手機放下，去呼吸新鮮空氣，世界比你的螢幕大得多！😎",
            "人生不是百米賽跑，是超長耐力賽，休息一下沒關係。",
            "今天沒考好？沒關係，你的人格分數永遠滿分💯。",
            "你的努力，連宇宙都在偷偷幫你加分！✨",
            "難過的時候，允許自己當個廢物，明天再站起來就好。",
            "比起當個完美大人，我們更需要一個快樂的自己。🥳",
            "你很棒，不用任何人證明。",
            "沒有一件事情是白費的，所有經歷都會成為你的經驗值！➕",
            "慢慢來，比較快。別人的終點不是你的起點。",
            "你不需要很厲害才能開始，但你需要開始才能變得很厲害。",
            "如果你討厭現在的自己，至少試著喜歡現在的瀏海吧！💇‍♀️",
            "人生就是不斷地從錯誤中學習。你不是錯了，你只是在測試極限！🧪",
            "別讓昨天的煩惱，偷走今天的快樂。🌞",
            "你是獨一無二的，就像這個世界上沒有兩片完全相同的葉子一樣。🍃",
            "每一次的失敗，都是成功的墊腳石。繼續往前走，你會到達你想去的地方。🚀",
            "別忘了，連神明也有休息的時候。🦸‍♂️",
            "你已經很努力了，給自己一個大大的讚~真的是太有實力了！👏",
            "生活就像打遊戲升級，有時候需要暫停一下，補充能量再出發！💪",
            "你不是一個人在戰鬥，這裡有一群和你一樣一起努力的朋友！🛡️",
            "每個人都有自己的節奏，別急，慢慢來，總會找到屬於你的步調。🎵",
        ];
        
        const ventResponses = [
            "聽起來超級不爽的！🤯 不過沒事啦，爛事會過去的，你超耐打。",
            "喔不... 拍拍。我懂那種感覺，先去喝杯珍奶冷靜一下啦！🥤",
            "管他的！你已經盡力了。把這個當成今天的『登出』鍵吧。👋",
            "如果可以，真想給你一個大大的擁抱！別讓垃圾情緒佔據你的空間。💪",
            "太扯了吧！那個人也太欠揍了吧！這裡只有你跟樹洞，你已經說出來了，就是個開始！",
            "OK，深呼吸！把這段話截圖存證，然後讓它爛在這裡。明天是新的開始。🚀",
        ];

        // ----------------------------------------------------
        // 1. 深淺模式切換邏輯
        // ----------------------------------------------------
        function toggleDarkMode() {
            const body = document.body;
            const sunIcon = document.getElementById('sun-icon');
            const moonIcon = document.getElementById('moon-icon');
            // 使用 localStorage 儲存狀態
            const isDarkMode = body.classList.toggle('dark-mode');
            localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');

            if (isDarkMode) {
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            } else {
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
            }
        }
        
        // 載入時檢查並應用主題
        function applySavedTheme() {
            const savedTheme = localStorage.getItem('theme');
            const body = document.body;
            const sunIcon = document.getElementById('sun-icon');
            const moonIcon = document.getElementById('moon-icon');
            
            if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                body.classList.add('dark-mode');
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            } else {
                body.classList.remove('dark-mode');
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
            }
        }

        // ----------------------------------------------------
        // 2. DOMContentLoaded 事件監聽與主邏輯
        // ----------------------------------------------------
        document.addEventListener('DOMContentLoaded', () => {
            applySavedTheme(); // 載入時應用主題

            const mobileMenu = document.getElementById('mobile-menu');
            document.getElementById('menu-btn').addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            mobileMenu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    // 點擊連結後隱藏選單，並稍微延遲以等待平滑滾動完成
                    setTimeout(() => mobileMenu.classList.add('hidden'), 300); 
                });
            });

            document.getElementById('theme-toggle').addEventListener('click', toggleDarkMode);

            // ----------------------------------------------------
            // 3. 隨機鼓勵小語生成邏輯
            // ----------------------------------------------------
            const quoteDisplay = document.getElementById('quote-display');
            document.getElementById('generate-quote-btn').addEventListener('click', () => {
                const randomIndex = Math.floor(Math.random() * quotes.length);
                quoteDisplay.textContent = quotes[randomIndex];
            });
            // 第一次載入時先生成一句
            const initialIndex = Math.floor(Math.random() * quotes.length);
            quoteDisplay.textContent = quotes[initialIndex];


            // ----------------------------------------------------
            // 4. 發洩樹洞功能邏輯
            // ----------------------------------------------------
            const ventInput = document.getElementById('vent-input');
            const ventResponse = document.getElementById('vent-response');
            document.getElementById('vent-submit-btn').addEventListener('click', () => {
                const message = ventInput.value.trim();

                if (message.length < 5) {
                    ventResponse.textContent = "至少說點什麼啦，不然樹洞不知道該回什麼... 😂";
                    return;
                }

                // 隨機選擇一個回覆
                const randomIndex = Math.floor(Math.random() * ventResponses.length);
                ventResponse.textContent = ventResponses[randomIndex];

                // 清空輸入框並聚焦，鼓勵繼續發洩
                ventInput.value = '';
                ventInput.focus();
            });


            // ----------------------------------------------------
            // 5. 視覺呼吸法互動邏輯 (5秒吸氣/放大, 5秒吐氣/縮小)
            // ----------------------------------------------------
            const startBtn = document.getElementById('start-breath');
            const stopBtn = document.getElementById('stop-breath');
            const statusDisplay = document.getElementById('breath-status');
            const countDisplay = document.getElementById('breath-count');
            const circle = document.getElementById('breathing-circle');

            let timerId = null;
            let currentPhase = 0; // 0:吸氣 (放大), 1:吐氣 (縮小)
            let count = 0;
            const cycleDuration = 5000; // 5 seconds per phase (5000ms)

            function runCycle() {
                const isDarkMode = document.body.classList.contains('dark-mode');
                
                if (currentPhase === 0) {
                    // 吸氣：放大
                    circle.style.transform = 'scale(2)';
                    circle.style.backgroundColor = isDarkMode ? '#f97316' : '#f472b6'; // 暖色系 (橘/粉)
                    statusDisplay.textContent = "😮‍💨 吸氣 (5秒)";
                    statusDisplay.className = 'text-3xl font-extrabold text-blue-600 transition duration-500 dark-mode:text-orange-400';
                    
                    count++;
                    countDisplay.textContent = `循環次數: ${count}`;
                    currentPhase = 1;
                } else {
                    // 吐氣：縮小
                    circle.style.transform = 'scale(1)';
                    circle.style.backgroundColor = isDarkMode ? '#10b981' : '#10b981'; // 冷色系 (綠)
                    statusDisplay.textContent = "😌 吐氣 (5秒)";
                    statusDisplay.className = 'text-3xl font-extrabold text-green-600 transition duration-500 dark-mode:text-teal-400';
                    currentPhase = 0;
                }
                
                // 設定下一個循環
                timerId = setTimeout(runCycle, cycleDuration);
            }

            // 開始按鈕事件
            startBtn.addEventListener('click', () => {
                if (timerId === null) {
                    startBtn.disabled = true;
                    stopBtn.disabled = false;
                    count = 0;
                    currentPhase = 1; // 設定為 1，讓 runCycle 第一次執行時進入 Phase 0 (吸氣)
                    
                    // 初始設定 transition time
                    circle.style.transitionDuration = `${cycleDuration}ms`; 
                    
                    // 倒數計時準備
                    statusDisplay.textContent = "準備開始 (3)";
                    let prepCount = 3;
                    statusDisplay.className = 'text-3xl font-extrabold text-gray-500 transition duration-500 dark-mode:text-gray-400';
                    const prepInterval = setInterval(() => {
                        prepCount--;
                        if (prepCount > 0) {
                            statusDisplay.textContent = `準備開始 (${prepCount})`;
                        } else {
                            clearInterval(prepInterval);
                            runCycle();
                        }
                    }, 1000);
                }
            });

            // 停止按鈕事件
            stopBtn.addEventListener('click', () => {
                clearTimeout(timerId);
                timerId = null;
                startBtn.disabled = false;
                stopBtn.disabled = true;
                const isDarkMode = document.body.classList.contains('dark-mode');
                statusDisplay.textContent = "✅ 練習結束，感覺好多了嗎？";
                statusDisplay.className = `text-3xl font-extrabold text-indigo-600 transition duration-500 dark-mode:text-indigo-300`;
                circle.style.transitionDuration = '0.3s';
                circle.style.transform = 'scale(1)'; // 回歸原始大小
                circle.style.backgroundColor = isDarkMode ? '#db2777' : '#f472b6'; // 回歸初始色
            });
        });
    </script>
</body>
</html>
